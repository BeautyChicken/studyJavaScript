<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>非同步流程控制 Callback,Promise,Async,Await</title>
<script> 
/*
//問題的起源:非同步的程式
function delayAdd(n1,n2,delayTime){
    //設定排成，延遲一段後時間執行
    setTimeout(function(){
        console.log(2);
        return n1+n2;
    },delayTime);
    console.log(1);
}
function test(){
    let result=delayAdd(3,4,2000);
    console.log(result);
}
*/
/*回呼函式
function delayAdd(n1,n2,delayTime,callback){
    //設定排程，延遲一段後時間執行
    setTimeout(function(){
       callback(n1+n2);
    },delayTime);
}
function test(){
    delayAdd(3,4,2000,function(result){
        console.log(result);
    });
}
*/
// -------------
// var funcA = function(){
//     console.log("function A");
// };
// var funcB = function(){
//     console.log("function B");
// };

// funcA();
// funcB();
// -------------


// var funcA = function(){
//     var i = Math.random() + 1;
//     setTimeout(function(){
//         console.log("function A");
//     },i*1000)
// }
// var funcB = function(){
//     var i = Math.random() + 1;
//     setTimeout(function(){
//         console.log("function B");
//     },i*1000)
// }

// funcA();
// funcB();

// var funcA = function(callback){
//     var i = Math.random() + 1;
//     setTimeout(
//         function(){
//             console.log("開始吃飯");
//             if(typeof callback === 'function' ){
//                 callback();
//             }
//         },i*1000);
//         console.log(i*1000);
// };
// var funcB = function(){
//     var i = Math.random() + 1;
//     setTimeout(function(){
//         console.log("吃飽好舒服");
//     },i*1000)
//     console.log(i*1000);
// }
// funcA( funcB );

// function delayAdd(n1,n2,delayTime,callback){
//     setTimeout(function(){
//         callback(n1+n2);
//     },delayTime)
// }
// function test(){
//     delayAdd(3,4,2000,function(result){
//         console.log(result);
//     });
// }
// test();



// Promise 物件
function delayAdd(n1,n2,delayTime){
    //建立 Promise 物件: new Promise (執行函式)
    return new Promise(function(resolve,reject){
        setTimeout(function(){
            resolve(n1+n2);
        },delayTime);
    });
};
function test(){
    let promise=delayAdd(3,4,2000);
    promise.then(function(result){
        console.log(result);
    });
}

</script>
<style>
button{
    padding: 10px 15px;
}
</style>
</head>
<body>
<h3>非同步流程控制</h3>
<button onclick="test();">test</button>
</body>
</html>